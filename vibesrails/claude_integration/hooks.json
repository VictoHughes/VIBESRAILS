{
  "$schema": "https://raw.githubusercontent.com/anthropics/claude-code/main/schemas/hooks.json",
  "hooks": {
    "SessionStart": [
      {
        "type": "command",
        "command": "python3 -c \"import sys; from pathlib import Path; p=Path('vibesrails.yaml'); sys.exit(0 if p.exists() else 1)\" || echo 'ğŸ’¡ vibesrails: Run `vibesrails --setup` for auto-security setup'",
        "description": "Check if vibesrails is configured"
      },
      {
        "type": "command",
        "command": "python3 -c \"from pathlib import Path; plans=sorted(Path('docs/plans').glob('*.md'), key=lambda p: p.stat().st_mtime, reverse=True) if Path('docs/plans').exists() else []; print(f'ğŸ“‹ Plan actif: {plans[0].name}') if plans else None\"",
        "description": "Show active plan from docs/plans/"
      },
      {
        "type": "command",
        "command": "python3 -c \"from pathlib import Path; p=Path('.claude/current-task.md'); print(f'ğŸ“Œ TÃ¢che en cours: {p.read_text().strip()[:80]}...') if p.exists() and p.read_text().strip() else None\"",
        "description": "Show current task memo"
      }
    ],
    "PreToolUse": [
      {
        "type": "command",
        "matcher": "Write|Edit",
        "command": "python3 -c \"from pathlib import Path; print('ğŸ›¡ï¸ vibesrails: Code will be scanned on commit' if Path('vibesrails.yaml').exists() else '')\"",
        "description": "Remind about vibesrails scanning"
      }
    ],
    "PreCompact": [
      {
        "type": "command",
        "command": "echo 'âš ï¸ Compaction imminente - le contexte va Ãªtre rÃ©sumÃ©'",
        "description": "Warn about compaction"
      }
    ]
  }
}
